# Docker+k8s

### Docker的底层原理

Docker是基于Google公司推出的Golang语言开发而来，基于Linux内核的Cgroups、NameSpace,以及Union FS等技术，对进程进行封装隔离，属于操作系统层面的虚拟化技术。

由于隔离的进程独立于宿主机和其他隔离的进程，也称之为容器。

容器内的应用程序直接运行在宿主机的内核上，容器没有自己的内核，也没有对硬件进行虚拟化，因此容器比虚拟机更为轻便。

### Docker一致性的环境

在企业里，程序从开发环境，到测试服务器，到生产环境，难以保证机器环境的一致性，极大可能出现依赖冲突，导致难以部署等bug。

然而利用docker的容器-镜像技术，提供除了内核以外完整的运行时环境，确保了应用环境的一致性。`docker image` `dockerfile`

### Docker安装部署

#### docker最核心的组件

- image镜像，构建容器（我们讲应用程序运行所需的环境，打包为镜像文件）
- container，容器（你的应用程序，就跑在容器中）
- 镜像仓库（dockerhub）（保存镜像文件，提供上传，下载镜像）好比github
- dockerfile，将你部署项目的操作，写成一个部署脚本，这就是dockerfile，且该脚本还能构建出镜像文件

#### 创建容器的过程

- 获取镜像，如docker pull centos，从镜像仓库拉取
- 使用镜像创建容器
- 分配文件系统，挂在一个读写层，在读写层加载镜像
- 分配网络/网络接口，创建一个网络接口，让容器和宿主机通信
- 容器获取IP地址
- 执行容器命令，如/bin/bash
- 反馈容器启动结果

#### 安装docker

安装环境初始化：虚拟化+容器 	

硬件层（笔记本/服务器）-> 虚拟机（VM centos/Ubuntu） ->Docker

提前准备好一个宿主机（虚拟机）

基础环境配置

```

```

安装docker

开启Linux内核的流量转发

```

```

